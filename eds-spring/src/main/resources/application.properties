#
# EDS, Encrypted Data Share - open source Cryptographic Sharing system.
# Copyright (c) 2016-2026, haugr.net
# mailto: eds AT haugr DOT net
#
# EDS is free software; you can redistribute it and/or modify it under the
# terms of the Apache License, as published by the Apache Software Foundation.
#
# EDS is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE. See the Apache License for more details.
#
# You should have received a copy of the Apache License, version 2, along with
# this program; If not, you can download a copy of the License
# here: https://www.apache.org/licenses/
#

# Spring Boot Application Configuration
spring.application.name=EDS

# Server Configuration
server.port=8080
server.servlet.context-path=/eds

# PostgreSQL Database Configuration (default)
spring.datasource.url=jdbc:postgresql://localhost:5432/eds
spring.datasource.username=eds_user
spring.datasource.password=eds
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# Database initialization handled externally
spring.sql.init.mode=never

# Connection Pool (HikariCP)
spring.datasource.hikari.maximum-pool-size=25
spring.datasource.hikari.connection-timeout=5000

# Jackson JSON Configuration
spring.jackson.serialization.write-dates-as-timestamps=false

# Max upload size (25 MB)
spring.servlet.multipart.max-file-size=25MB
spring.servlet.multipart.max-request-size=25MB

# Logging
logging.level.net.haugr.eds=INFO
logging.level.org.hibernate.SQL=WARN

# Actuator Health Endpoints
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.endpoint.health.probes.enabled=true
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true

# Kubernetes probe configuration
# Liveness: only checks if app is running (no external dependencies)
# Readiness: includes EDS initialization and database checks
management.endpoint.health.group.liveness.include=livenessState
management.endpoint.health.group.readiness.include=readinessState,db,eds
